/*! cube-gallery 2021-01-21 */
"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),CubeGallery=function(){function a(b,c){var d=this,e=c.minHeight,f=c.margin;_classCallCheck(this,a),this.id=b,this.minHeight=e&&e>0?e:150,this.unit="px",this.margin=f&&f>0?f:0,this.gallery=document.querySelector("#"+this.id),this.gallery.style.fontSize="0",this.gallery.style.lineHeight="0",this.extra=0;var g=document.querySelectorAll("#"+this.id+" a");g.length>0&&(this.findExtraWidth(g[0]),g.forEach(function(a){a.style.display="inline-block",a.style.position="relative"}));var h=document.querySelectorAll("#"+this.id+" img");this.findExtraWidth(h[0]),window.addEventListener("resize",function(){d.resize()});var i=function(){return d.loadData()},j=function(){return d.create()},k=0;h.forEach.call(h,function(a){a.complete?++k===h.length&&(console.log("All images loaded!"),i(),j()):a.addEventListener("load",function(){++k===h.length&&(console.log("All images loaded!"),i(),j())},!1)})}return _createClass(a,[{key:"loadData",value:function(){var a=this;this.galleryWidth=this.gallery.offsetWidth,this.images=document.querySelectorAll("#"+this.id+" img"),this.images.forEach(function(b){b.width=Math.floor(b.naturalWidth*a.minHeight/b.naturalHeight),b.height=a.minHeight}),this.nbImages=this.images.length}},{key:"findExtraWidth",value:function(a){var b=getComputedStyle(a),c=Number(b.borderLeftWidth.substr(0,b.borderLeftWidth.length-2)),d=Number(b.borderRightWidth.substr(0,b.borderLeftWidth.length-2));this.extra=this.extra+c+d}}]),a}();CubeGallery.prototype.resize=function(){return this.loadData(),this.create()},CubeGallery.prototype.create=function(){for(var a=this,b=[],c=[],d=0,e=0;e<this.nbImages;e++){var f=this.images[e],g=void 0!=this.images[e+1]?this.images[e+1]:null;d=Math.floor(d+f.width),c.push(f),(null==g||Math.floor(d+g.width)>this.galleryWidth)&&(b.push(c),d=0,c=[])}return b.forEach(function(b){var c=0;b.forEach(function(a){return c=Math.floor(c+a.width)}),b.forEach(function(b){b.width=Math.floor(b.width*(b.height*a.galleryWidth/c)/b.height-2*a.margin-a.extra),b.height=Math.floor(b.height*a.galleryWidth/c-2*a.margin-a.extra),b.style.margin=a.margin+"px"})}),this};